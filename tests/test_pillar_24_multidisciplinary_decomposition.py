#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Pillar 24: å¤æ‚ç»¼åˆå¤šå­¦ç§‘ä»»åŠ¡åˆ†è§£èƒ½åŠ›æµ‹è¯•
æµ‹è¯•æ¨¡å‹åœ¨è·¨å­¦ç§‘çŸ¥è¯†æ•´åˆã€å¤æ‚ç³»ç»Ÿåˆ†è§£å’Œå¤šé¢†åŸŸååŒæ–¹é¢çš„èƒ½åŠ›
"""

import ollama
import sys
import os
import json
import time
import re
from typing import Dict, List, Any
from utils import call_qiniu_deepseek, run_single_test

sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))
try:
    from config import MODEL_TO_TEST
except ImportError:
    print("é”™è¯¯: æ— æ³•ä»config.pyå¯¼å…¥MODEL_TO_TESTã€‚è¯·ç¡®ä¿config.pyå­˜åœ¨äºé¡¹ç›®æ ¹ç›®å½•ã€‚")
    sys.exit(1)

class MultidisciplinaryDecompositionTest:
    def __init__(self, model_name: str):
        self.model_name = model_name
        self.model_dir = os.path.join(os.path.dirname(__file__), '..', 'testout', self.model_name.replace(':', '_').replace('/', '_'))
        os.makedirs(self.model_dir, exist_ok=True)

    def call_model(self, prompt, options=None):
        return run_single_test("Pillar 24: Multidisciplinary Decomposition", prompt, self.model_name, options or {}, messages=[], test_script_name="test_pillar_24_multidisciplinary_decomposition.py")[0]
    
    def test_smart_city_transformation(self) -> Dict[str, Any]:
        """æµ‹è¯•æ™ºæ…§åŸå¸‚è½¬å‹çš„å¤šå­¦ç§‘ç»¼åˆåˆ†è§£"""
        prompt = """
ä½ æ˜¯ä¸€ä½æ™ºæ…§åŸå¸‚è½¬å‹é¡¹ç›®çš„æ€»æ¶æ„å¸ˆï¼Œè´Ÿè´£ä¸ºä¸€ä¸ª800ä¸‡äººå£çš„è¶…å¤§åŸå¸‚è®¾è®¡å…¨é¢çš„æ™ºæ…§åŒ–è½¬å‹æ–¹æ¡ˆã€‚

é¡¹ç›®èƒŒæ™¯ï¼š
- åŸå¸‚è§„æ¨¡ï¼š800ä¸‡äººå£ï¼Œé¢ç§¯1.6ä¸‡å¹³æ–¹å…¬é‡Œ
- è½¬å‹ç›®æ ‡ï¼šå»ºè®¾å…¨çƒé¢†å…ˆçš„æ™ºæ…§åŸå¸‚ï¼Œæå‡æ²»ç†æ•ˆç‡50%ï¼Œæ”¹å–„æ°‘ç”ŸæœåŠ¡è´¨é‡
- æŠ•èµ„è§„æ¨¡ï¼š5000äº¿äººæ°‘å¸ï¼Œåˆ†10å¹´å®æ–½
- æŠ€æœ¯è¦æ±‚ï¼šèåˆ5G/6Gã€AIã€IoTã€åŒºå—é“¾ã€æ•°å­—å­ªç”Ÿç­‰å‰æ²¿æŠ€æœ¯

æ¶‰åŠçš„æ ¸å¿ƒå­¦ç§‘é¢†åŸŸï¼š

1. **ä¿¡æ¯æŠ€æœ¯é¢†åŸŸ**ï¼š
   - åŸºç¡€è®¾æ–½ï¼š5G/6Gç½‘ç»œã€äº‘è®¡ç®—ä¸­å¿ƒã€è¾¹ç¼˜è®¡ç®—èŠ‚ç‚¹
   - æ•°æ®å¹³å°ï¼šåŸå¸‚å¤§è„‘ã€æ•°æ®æ¹–ã€AIç®—æ³•å¹³å°
   - å®‰å…¨ä½“ç³»ï¼šç½‘ç»œå®‰å…¨ã€æ•°æ®å®‰å…¨ã€éšç§ä¿æŠ¤

2. **åŸå¸‚è§„åˆ’é¢†åŸŸ**ï¼š
   - ç©ºé—´è§„åˆ’ï¼šåœŸåœ°åˆ©ç”¨ä¼˜åŒ–ã€äº¤é€šç½‘ç»œé‡æ„ã€ç»¿è‰²ç©ºé—´å¸ƒå±€
   - åŸºç¡€è®¾æ–½ï¼šæ™ºèƒ½äº¤é€šã€æ™ºæ…§èƒ½æºã€æ™ºèƒ½å»ºç­‘
   - ç¯å¢ƒè®¾è®¡ï¼šç”Ÿæ€å»Šé“ã€æµ·ç»µåŸå¸‚ã€ç¢³ä¸­å’Œè§„åˆ’

3. **ç¤¾ä¼šæ²»ç†é¢†åŸŸ**ï¼š
   - æ”¿åŠ¡æœåŠ¡ï¼šä¸€ç½‘é€šåŠã€æ•°å­—æ”¿åºœã€æ™ºèƒ½å®¡æ‰¹
   - å…¬å…±å®‰å…¨ï¼šæ™ºèƒ½ç›‘æ§ã€åº”æ€¥ç®¡ç†ã€é£é™©é¢„è­¦
   - ç¤¾åŒºæ²»ç†ï¼šæ™ºæ…§ç¤¾åŒºã€å±…æ°‘å‚ä¸ã€ç¤¾ä¼šååŒ

4. **ç»æµå‘å±•é¢†åŸŸ**ï¼š
   - äº§ä¸šå‡çº§ï¼šæ•°å­—ç»æµã€æ™ºèƒ½åˆ¶é€ ã€åˆ›æ–°ç”Ÿæ€
   - å•†ä¸šæ¨¡å¼ï¼šå¹³å°ç»æµã€å…±äº«ç»æµã€æ•°å­—é‡‘è
   - å°±ä¸šè½¬å‹ï¼šæŠ€èƒ½åŸ¹è®­ã€æ–°å…´å²—ä½ã€åŠ³åŠ¨ä¿æŠ¤

5. **ç¯å¢ƒç§‘å­¦é¢†åŸŸ**ï¼š
   - ç¯å¢ƒç›‘æµ‹ï¼šç©ºæ°”è´¨é‡ã€æ°´è´¨ç›‘æ§ã€å™ªéŸ³ç®¡ç†
   - èµ„æºç®¡ç†ï¼šèƒ½æºä¼˜åŒ–ã€æ°´èµ„æºå¾ªç¯ã€åºŸç‰©å¤„ç†
   - ç”Ÿæ€ä¿æŠ¤ï¼šç”Ÿç‰©å¤šæ ·æ€§ã€ç»¿è‰²å‘å±•ã€å¯æŒç»­æ€§

6. **ç¤¾ä¼šå¿ƒç†é¢†åŸŸ**ï¼š
   - æ•°å­—é¸¿æ²Ÿï¼šè€å¹´äººé€‚åº”ã€æ•™è‚²æ™®åŠã€æŠ€èƒ½åŸ¹è®­
   - éšç§ä¿æŠ¤ï¼šä¸ªäººæ•°æ®ã€ç›‘æ§ä¼¦ç†ã€æƒåˆ©ä¿éšœ
   - ç¤¾ä¼šæ¥å—åº¦ï¼šå…¬ä¼—å‚ä¸ã€æ–‡åŒ–é€‚åº”ã€ä»·å€¼è®¤åŒ

å¤æ‚æŒ‘æˆ˜ï¼š
- æŠ€æœ¯èåˆï¼šå¤šç§å‰æ²¿æŠ€æœ¯çš„ç³»ç»Ÿé›†æˆ
- æ•°æ®æ²»ç†ï¼šæµ·é‡æ•°æ®çš„é‡‡é›†ã€å­˜å‚¨ã€åˆ†æã€åº”ç”¨
- æ ‡å‡†ç»Ÿä¸€ï¼šä¸åŒç³»ç»Ÿé—´çš„äº’è”äº’é€š
- å®‰å…¨ä¿éšœï¼šç½‘ç»œå®‰å…¨ã€æ•°æ®å®‰å…¨ã€ç¤¾ä¼šå®‰å…¨
- æŠ•èµ„å›æŠ¥ï¼šå·¨é¢æŠ•èµ„çš„æ•ˆç›Šè¯„ä¼°å’Œé£é™©æ§åˆ¶
- ç¤¾ä¼šå½±å“ï¼šå¯¹å°±ä¸šã€ç”Ÿæ´»ã€æ–‡åŒ–çš„æ·±è¿œå½±å“

è¯·è®¾è®¡å…¨é¢çš„å¤šå­¦ç§‘ä»»åŠ¡åˆ†è§£æ–¹æ¡ˆï¼š

1. **å­¦ç§‘çŸ¥è¯†æ•´åˆ**ï¼š
   - åˆ†æ6å¤§å­¦ç§‘é¢†åŸŸçš„æ ¸å¿ƒçŸ¥è¯†è¦æ±‚
   - è¯†åˆ«è·¨å­¦ç§‘çš„å…³é”®äº¤å‰ç‚¹å’Œèåˆæœºä¼š
   - è®¾è®¡å­¦ç§‘é—´çš„ååŒåˆ›æ–°æœºåˆ¶

2. **ç³»ç»Ÿæ€§ä»»åŠ¡åˆ†è§£**ï¼š
   - å°†æ™ºæ…§åŸå¸‚è½¬å‹åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„å…·ä½“ä»»åŠ¡
   - å»ºç«‹ä»»åŠ¡é—´çš„ä¾èµ–å…³ç³»å’Œä¼˜å…ˆçº§
   - è®¾è®¡åˆ†é˜¶æ®µå®æ–½çš„è·¯çº¿å›¾

3. **è·¨å­¦ç§‘åä½œæœºåˆ¶**ï¼š
   - è®¾è®¡å¤šå­¦ç§‘ä¸“å®¶å›¢é˜Ÿçš„ç»„ç»‡æ¶æ„
   - å»ºç«‹è·¨å­¦ç§‘æ²Ÿé€šå’Œå†³ç­–æœºåˆ¶
   - åˆ¶å®šçŸ¥è¯†å…±äº«å’Œæˆæœè½¬åŒ–æµç¨‹

4. **å¤æ‚æ€§ç®¡ç†ç­–ç•¥**ï¼š
   - åº”å¯¹æŠ€æœ¯å¤æ‚æ€§çš„åˆ†è§£ç­–ç•¥
   - å¤„ç†ç¤¾ä¼šå¤æ‚æ€§çš„åè°ƒæœºåˆ¶
   - ç®¡ç†ç»æµå¤æ‚æ€§çš„é£é™©æ§åˆ¶

5. **åˆ›æ–°é›†æˆæ–¹æ¡ˆ**ï¼š
   - æŠ€æœ¯åˆ›æ–°ä¸ç¤¾ä¼šåˆ›æ–°çš„ç»“åˆ
   - ç†è®ºç ”ç©¶ä¸å®è·µåº”ç”¨çš„è½¬åŒ–
   - æœ¬åœŸåŒ–ä¸å›½é™…åŒ–çš„å¹³è¡¡

è¦æ±‚è¾“å‡ºï¼š
- å¤šå­¦ç§‘çŸ¥è¯†å›¾è°±
- ç³»ç»Ÿä»»åŠ¡åˆ†è§£æ ‘
- è·¨å­¦ç§‘åä½œçŸ©é˜µ
- åˆ›æ–°é›†æˆè·¯çº¿å›¾
"""
        
        try:
            response = self.call_model(prompt)
            
            return {
                "test_name": "smart_city_transformation",
                "prompt": prompt,
                "response": response,
                "timestamp": time.time(),
                "success": True
            }
            
        except Exception as e:
            return {
                "test_name": "smart_city_transformation",
                "error": str(e),
                "success": False
            }
    
    def test_climate_change_response(self) -> Dict[str, Any]:
        """æµ‹è¯•æ°”å€™å˜åŒ–åº”å¯¹çš„å¤šå­¦ç§‘ç»¼åˆæ–¹æ¡ˆ"""
        prompt = """
ä½ æ˜¯è”åˆå›½æ°”å€™å˜åŒ–åº”å¯¹å§”å‘˜ä¼šçš„é¦–å¸­ç§‘å­¦é¡¾é—®ï¼Œè´Ÿè´£åˆ¶å®šå…¨çƒæ°”å€™å˜åŒ–ç»¼åˆåº”å¯¹æ–¹æ¡ˆã€‚

å…¨çƒæŒ‘æˆ˜èƒŒæ™¯ï¼š
- æ°”å€™ç›®æ ‡ï¼š2050å¹´å®ç°ç¢³ä¸­å’Œï¼Œæ§åˆ¶å…¨çƒå‡æ¸©1.5Â°Cä»¥å†…
- å½±å“èŒƒå›´ï¼š195ä¸ªå›½å®¶ï¼Œ78äº¿äººå£ï¼Œå…¨çƒç»æµä½“ç³»
- æ—¶é—´ç´§è¿«ï¼šä»…å‰©25å¹´æ—¶é—´ï¼Œéœ€è¦ç³»ç»Ÿæ€§å˜é©
- å¤æ‚æ€§ï¼šæ¶‰åŠèƒ½æºã€ç»æµã€ç¤¾ä¼šã€æ”¿æ²»ã€æŠ€æœ¯ç­‰å¤šä¸ªç»´åº¦

æ¶‰åŠçš„æ ¸å¿ƒå­¦ç§‘é¢†åŸŸï¼š

1. **æ°”å€™ç§‘å­¦é¢†åŸŸ**ï¼š
   - æ°”å€™å»ºæ¨¡ï¼šå…¨çƒæ°”å€™æ¨¡å‹ã€åŒºåŸŸæ°”å€™é¢„æµ‹ã€æç«¯å¤©æ°”é¢„è­¦
   - ç¢³å¾ªç¯ï¼šç¢³æºç¢³æ±‡ã€ç¢³è¶³è¿¹è®¡ç®—ã€ç¢³ç›‘æµ‹æŠ€æœ¯
   - å½±å“è¯„ä¼°ï¼šæµ·å¹³é¢ä¸Šå‡ã€ç”Ÿæ€ç³»ç»Ÿå˜åŒ–ã€å†œä¸šå½±å“

2. **èƒ½æºæŠ€æœ¯é¢†åŸŸ**ï¼š
   - å¯å†ç”Ÿèƒ½æºï¼šå¤ªé˜³èƒ½ã€é£èƒ½ã€æ°´èƒ½ã€åœ°çƒ­èƒ½ã€ç”Ÿç‰©è´¨èƒ½
   - å‚¨èƒ½æŠ€æœ¯ï¼šç”µæ± æŠ€æœ¯ã€æ°¢èƒ½ã€æŠ½æ°´è“„èƒ½ã€å‹ç¼©ç©ºæ°”å‚¨èƒ½
   - èƒ½æ•ˆæå‡ï¼šå»ºç­‘èŠ‚èƒ½ã€å·¥ä¸šèŠ‚èƒ½ã€äº¤é€šç”µæ°”åŒ–

3. **ç»æµå­¦é¢†åŸŸ**ï¼š
   - ç¢³å®šä»·ï¼šç¢³ç¨ã€ç¢³äº¤æ˜“ã€ç¢³è¾¹å¢ƒè°ƒèŠ‚æœºåˆ¶
   - ç»¿è‰²é‡‘èï¼šç»¿è‰²å€ºåˆ¸ã€ESGæŠ•èµ„ã€æ°”å€™é£é™©è¯„ä¼°
   - ç»æµè½¬å‹ï¼šäº§ä¸šç»“æ„è°ƒæ•´ã€å°±ä¸šè½¬ç§»ã€åŒºåŸŸå‘å±•

4. **æ”¿ç­–æ³•å¾‹é¢†åŸŸ**ï¼š
   - å›½é™…åè°ƒï¼šã€Šå·´é»åå®šã€‹å®æ–½ã€å›½é™…åˆä½œæœºåˆ¶
   - å›½å†…æ”¿ç­–ï¼šç¢³ä¸­å’Œæ³•å¾‹ã€ç¯ä¿æ³•è§„ã€æ¿€åŠ±æ”¿ç­–
   - æ²»ç†æœºåˆ¶ï¼šå¤šå±‚çº§æ²»ç†ã€å…¬ä¼—å‚ä¸ã€é€æ˜åº¦æœºåˆ¶

5. **ç¤¾ä¼šå­¦é¢†åŸŸ**ï¼š
   - è¡Œä¸ºæ”¹å˜ï¼šæ¶ˆè´¹æ¨¡å¼ã€ç”Ÿæ´»æ–¹å¼ã€ä»·å€¼è§‚å¿µ
   - ç¤¾ä¼šå…¬æ­£ï¼šæ°”å€™æ­£ä¹‰ã€å‘å±•æƒåˆ©ã€ä»£é™…å…¬å¹³
   - æ–‡åŒ–é€‚åº”ï¼šä¼ ç»Ÿæ–‡åŒ–ã€ç¤¾åŒºå‚ä¸ã€æ•™è‚²æ™®åŠ

6. **æŠ€æœ¯å·¥ç¨‹é¢†åŸŸ**ï¼š
   - ç¢³æ•è·ï¼šCCUSæŠ€æœ¯ã€ç›´æ¥ç©ºæ°”æ•è·ã€å·¥ä¸šå‡æ’
   - æ™ºèƒ½ç³»ç»Ÿï¼šæ™ºèƒ½ç”µç½‘ã€æ™ºæ…§äº¤é€šã€æ•°å­—åŒ–ç®¡ç†
   - ç”Ÿæ€å·¥ç¨‹ï¼šç”Ÿæ€ä¿®å¤ã€è‡ªç„¶è§£å†³æ–¹æ¡ˆã€ç”Ÿç‰©å¤šæ ·æ€§ä¿æŠ¤

å¤æ‚ç³»ç»ŸæŒ‘æˆ˜ï¼š
- å…¨çƒåè°ƒï¼šä¸åŒå›½å®¶å‘å±•æ°´å¹³å’Œåˆ©ç›Šè¯‰æ±‚å·®å¼‚å·¨å¤§
- æŠ€æœ¯çªç ´ï¼šå¤šé¡¹å…³é”®æŠ€æœ¯ä»éœ€é‡å¤§çªç ´
- ç»æµè½¬å‹ï¼šä¼ ç»Ÿäº§ä¸šè½¬å‹å’Œæ–°å…´äº§ä¸šå‘å±•çš„å¹³è¡¡
- ç¤¾ä¼šæ¥å—ï¼šå…¬ä¼—è®¤çŸ¥ã€è¡Œä¸ºæ”¹å˜ã€æ”¿æ²»æ”¯æŒ
- æ—¶é—´å‹åŠ›ï¼šæŠ€æœ¯ç ”å‘ã€æ”¿ç­–å®æ–½ã€ç¤¾ä¼šè½¬å‹çš„æ—¶é—´çº¦æŸ

è¯·è®¾è®¡å…¨çƒæ°”å€™å˜åŒ–åº”å¯¹çš„å¤šå­¦ç§‘ç»¼åˆæ–¹æ¡ˆï¼š

1. **å¤šå­¦ç§‘çŸ¥è¯†èåˆ**ï¼š
   - æ•´åˆ6å¤§å­¦ç§‘çš„æ ¸å¿ƒç†è®ºå’Œæ–¹æ³•
   - è¯†åˆ«å­¦ç§‘äº¤å‰çš„åˆ›æ–°çªç ´ç‚¹
   - å»ºç«‹è·¨å­¦ç§‘çš„ç ”ç©¶åˆä½œç½‘ç»œ

2. **ç³»ç»Ÿæ€§è§£å†³æ–¹æ¡ˆ**ï¼š
   - è®¾è®¡æŠ€æœ¯-ç»æµ-ç¤¾ä¼šçš„ç»¼åˆè§£å†³è·¯å¾„
   - åˆ¶å®šåˆ†é˜¶æ®µã€åˆ†åŒºåŸŸçš„å®æ–½ç­–ç•¥
   - å»ºç«‹å…¨çƒ-å›½å®¶-åœ°æ–¹çš„å¤šå±‚çº§è¡ŒåŠ¨æ¡†æ¶

3. **å¤æ‚æ€§åè°ƒæœºåˆ¶**ï¼š
   - è®¾è®¡å…¨çƒæ²»ç†å’Œåè°ƒæœºåˆ¶
   - å»ºç«‹ç§‘å­¦-æ”¿ç­–-ç¤¾ä¼šçš„å¯¹è¯å¹³å°
   - åˆ¶å®šå†²çªè§£å†³å’Œåˆ©ç›Šå¹³è¡¡æœºåˆ¶

4. **åˆ›æ–°é©±åŠ¨ç­–ç•¥**ï¼š
   - æ¨åŠ¨é¢ è¦†æ€§æŠ€æœ¯åˆ›æ–°
   - ä¿ƒè¿›å•†ä¸šæ¨¡å¼åˆ›æ–°
   - å¼•å¯¼ç¤¾ä¼šåˆ¶åº¦åˆ›æ–°

5. **é£é™©ç®¡ç†ä½“ç³»**ï¼š
   - è¯„ä¼°å’Œåº”å¯¹è½¬å‹é£é™©
   - å»ºç«‹é€‚åº”æ€§ç®¡ç†æœºåˆ¶
   - è®¾è®¡åº”æ€¥å“åº”é¢„æ¡ˆ

è¦æ±‚è¾“å‡ºï¼š
- å¤šå­¦ç§‘èåˆæ¡†æ¶å›¾
- å…¨çƒè¡ŒåŠ¨è·¯çº¿å›¾
- åè°ƒæ²»ç†æœºåˆ¶è®¾è®¡
- é£é™©ç®¡ç†ä½“ç³»æ¶æ„
"""
        
        try:
            response = self.call_model(prompt)
            
            return {
                "test_name": "climate_change_response",
                "prompt": prompt,
                "response": response,
                "timestamp": time.time(),
                "success": True
            }
            
        except Exception as e:
            return {
                "test_name": "climate_change_response",
                "error": str(e),
                "success": False
            }
    
    def test_space_exploration_program(self) -> Dict[str, Any]:
        """æµ‹è¯•å¤ªç©ºæ¢ç´¢è®¡åˆ’çš„å¤šå­¦ç§‘ç»¼åˆè®¾è®¡"""
        prompt = """
ä½ æ˜¯å›½é™…å¤ªç©ºæ¢ç´¢è”ç›Ÿçš„æ€»è®¾è®¡å¸ˆï¼Œè´Ÿè´£åˆ¶å®šäººç±»æ·±ç©ºæ¢ç´¢çš„ç™¾å¹´è®¡åˆ’ã€‚

æ¢ç´¢æ„¿æ™¯ï¼š
- ç»ˆæç›®æ ‡ï¼šå»ºç«‹äººç±»åœ¨å¤ªé˜³ç³»çš„æ°¸ä¹…å­˜åœ¨ï¼Œä¸ºæ˜Ÿé™…æ¢ç´¢å¥ å®šåŸºç¡€
- æ—¶é—´è·¨åº¦ï¼š2025-2125å¹´ï¼Œåˆ†ä¸º4ä¸ª25å¹´é˜¶æ®µ
- æ¢ç´¢èŒƒå›´ï¼šæœˆçƒåŸºåœ°ã€ç«æ˜Ÿæ®–æ°‘ã€å°è¡Œæ˜Ÿå¼€é‡‡ã€æœ¨æ˜Ÿå«æ˜Ÿæ¢ç´¢ã€å¤ªé˜³ç³»è¾¹ç¼˜
- å‚ä¸ä¸»ä½“ï¼šå…¨çƒä¸»è¦èˆªå¤©å›½å®¶ã€ç§äººèˆªå¤©å…¬å¸ã€å›½é™…ç»„ç»‡

æ¶‰åŠçš„æ ¸å¿ƒå­¦ç§‘é¢†åŸŸï¼š

1. **èˆªå¤©å·¥ç¨‹é¢†åŸŸ**ï¼š
   - æ¨è¿›æŠ€æœ¯ï¼šåŒ–å­¦æ¨è¿›ã€ç”µæ¨è¿›ã€æ ¸æ¨è¿›ã€å¤ªé˜³å¸†
   - ç”Ÿå‘½ä¿éšœï¼šå¯†é—­ç”Ÿæ€ç³»ç»Ÿã€ç©ºæ°”å¾ªç¯ã€æ°´å¾ªç¯ã€é£Ÿç‰©ç”Ÿäº§
   - èˆªå¤©å™¨è®¾è®¡ï¼šæ·±ç©ºé£èˆ¹ã€ç€é™†å™¨ã€æ¼«æ¸¸è½¦ã€ç©ºé—´ç«™

2. **å¤©ä½“ç‰©ç†é¢†åŸŸ**ï¼š
   - å¤©ä½“åŠ›å­¦ï¼šè½¨é“è®¾è®¡ã€å¼•åŠ›è¾…åŠ©ã€æ‹‰æ ¼æœ—æ—¥ç‚¹åˆ©ç”¨
   - ç©ºé—´ç¯å¢ƒï¼šè¾å°„é˜²æŠ¤ã€å¾®é‡åŠ›å½±å“ã€å¤ªç©ºå¤©æ°”
   - èµ„æºæ¢æµ‹ï¼šæ°´å†°ã€çŸ¿ç‰©ã€å¤§æ°”æˆåˆ†ã€åœ°è´¨ç»“æ„

3. **ç”Ÿç‰©åŒ»å­¦é¢†åŸŸ**ï¼š
   - å¤ªç©ºåŒ»å­¦ï¼šéª¨è´¨ç–æ¾ã€è‚Œè‚‰èç¼©ã€å¿ƒè¡€ç®¡é€‚åº”ã€ç¥ç»ç³»ç»Ÿå˜åŒ–
   - å¿ƒç†å¥åº·ï¼šéš”ç¦»å‹åŠ›ã€å›¢é˜ŸåŠ¨åŠ›ã€åœ°çƒæ€ä¹¡ã€ä»»åŠ¡å‹åŠ›
   - ç”Ÿæ€ç³»ç»Ÿï¼šå¾®ç”Ÿç‰©ç¾¤è½ã€æ¤ç‰©æ ½åŸ¹ã€åŠ¨ç‰©å®éªŒã€ç”Ÿç‰©å¾ªç¯

4. **ææ–™ç§‘å­¦é¢†åŸŸ**ï¼š
   - æç«¯ç¯å¢ƒææ–™ï¼šè€è¾å°„ã€è€æ¸©å·®ã€è€è…èš€ã€è½»è´¨é«˜å¼º
   - åŸä½èµ„æºåˆ©ç”¨ï¼š3Dæ‰“å°ã€é‡‘å±å†¶ç‚¼ã€å»ºç­‘ææ–™ã€ç‡ƒæ–™åˆ¶å¤‡
   - æ™ºèƒ½ææ–™ï¼šè‡ªä¿®å¤ã€å½¢çŠ¶è®°å¿†ã€å¤šåŠŸèƒ½é›†æˆ

5. **ä¿¡æ¯æŠ€æœ¯é¢†åŸŸ**ï¼š
   - é€šä¿¡æŠ€æœ¯ï¼šæ·±ç©ºé€šä¿¡ã€æ¿€å…‰é€šä¿¡ã€é‡å­é€šä¿¡
   - äººå·¥æ™ºèƒ½ï¼šè‡ªä¸»å¯¼èˆªã€æ•…éšœè¯Šæ–­ã€å†³ç­–æ”¯æŒã€æœºå™¨äººæŠ€æœ¯
   - æ•°æ®å¤„ç†ï¼šæµ·é‡æ•°æ®ä¼ è¾“ã€å®æ—¶å¤„ç†ã€ç§‘å­¦åˆ†æ

6. **ç¤¾ä¼šç»æµé¢†åŸŸ**ï¼š
   - å›½é™…åˆä½œï¼šæŠ€æœ¯å…±äº«ã€æˆæœ¬åˆ†æ‹…ã€é£é™©å…±æ‹…ã€åˆ©ç›Šåˆ†é…
   - ç»æµæ¨¡å¼ï¼šå¤ªç©ºç»æµã€èµ„æºå¼€å‘ã€å•†ä¸šåŒ–è¿è¥
   - æ³•å¾‹ä¼¦ç†ï¼šå¤ªç©ºæ³•ã€ç¯å¢ƒä¿æŠ¤ã€æ–‡åŒ–ä¿æŠ¤ã€ä»£é™…è´£ä»»

7. **åœ°çƒç§‘å­¦é¢†åŸŸ**ï¼š
   - å¯¹æ¯”è¡Œæ˜Ÿå­¦ï¼šåœ°çƒ-ç«æ˜Ÿå¯¹æ¯”ã€æ°”å€™æ¼”åŒ–ã€ç”Ÿå‘½èµ·æº
   - ç¯å¢ƒä¿æŠ¤ï¼šå¤ªç©ºåƒåœ¾ã€è¡Œæ˜Ÿä¿æŠ¤ã€ç”Ÿæ€å½±å“è¯„ä¼°
   - èµ„æºç®¡ç†ï¼šåœ°çƒèµ„æºèŠ‚çº¦ã€å¤ªç©ºèµ„æºåˆ©ç”¨ã€å¯æŒç»­å‘å±•

è¶…çº§å¤æ‚æŒ‘æˆ˜ï¼š
- æŠ€æœ¯æé™ï¼šå¤šé¡¹æŠ€æœ¯éœ€è¦é‡å¤§çªç ´ï¼Œé£é™©æé«˜
- æˆæœ¬å·¨å¤§ï¼šæ€»æŠ•èµ„å¯èƒ½è¾¾åˆ°æ•°ä¸‡äº¿ç¾å…ƒ
- æ—¶é—´è·¨åº¦ï¼šè·¨è¶Šå‡ ä»£äººï¼Œéœ€è¦æŒç»­æ‰¿è¯º
- å›½é™…åè°ƒï¼šä¸åŒå›½å®¶çš„æ”¿æ²»ã€ç»æµã€æŠ€æœ¯å·®å¼‚
- ä¼¦ç†äº‰è®®ï¼šå¤ªç©ºæ®–æ°‘çš„é“å¾·é—®é¢˜ã€ç¯å¢ƒå½±å“
- é£é™©ç®¡ç†ï¼šäººå‘˜å®‰å…¨ã€ä»»åŠ¡å¤±è´¥ã€æŠ€æœ¯é£é™©

è¯·è®¾è®¡äººç±»æ·±ç©ºæ¢ç´¢çš„å¤šå­¦ç§‘ç»¼åˆè®¡åˆ’ï¼š

1. **è·¨å­¦ç§‘çŸ¥è¯†æ•´åˆ**ï¼š
   - èåˆ7å¤§å­¦ç§‘é¢†åŸŸçš„å‰æ²¿çŸ¥è¯†
   - è¯†åˆ«å­¦ç§‘äº¤å‰çš„çªç ´æ€§åˆ›æ–°ç‚¹
   - å»ºç«‹å…¨çƒç§‘å­¦åˆä½œç½‘ç»œ

2. **åˆ†é˜¶æ®µç³»ç»Ÿè§„åˆ’**ï¼š
   - è®¾è®¡4ä¸ª25å¹´é˜¶æ®µçš„é€’è¿›ç›®æ ‡
   - åˆ¶å®šæŠ€æœ¯å‘å±•è·¯çº¿å›¾
   - å»ºç«‹é‡Œç¨‹ç¢‘å’Œè¯„ä¼°æœºåˆ¶

3. **å¤šç»´åº¦åè°ƒæœºåˆ¶**ï¼š
   - è®¾è®¡å›½é™…åˆä½œæ²»ç†æ¡†æ¶
   - å»ºç«‹å…¬ç§åˆä½œæ¨¡å¼
   - åˆ¶å®šé£é™©åˆ†æ‹…æœºåˆ¶

4. **åˆ›æ–°ç”Ÿæ€æ„å»º**ï¼š
   - æ¨åŠ¨é¢ è¦†æ€§æŠ€æœ¯åˆ›æ–°
   - åŸ¹è‚²å¤ªç©ºç»æµç”Ÿæ€
   - å»ºç«‹äººæ‰åŸ¹å…»ä½“ç³»

5. **å¯æŒç»­å‘å±•ä¿éšœ**ï¼š
   - ç¡®ä¿ç¯å¢ƒå’Œä¼¦ç†è´£ä»»
   - å»ºç«‹é•¿æœŸèµ„é‡‘ä¿éšœæœºåˆ¶
   - è®¾è®¡é€‚åº”æ€§è°ƒæ•´æœºåˆ¶

è¦æ±‚è¾“å‡ºï¼š
- å¤šå­¦ç§‘çŸ¥è¯†æ•´åˆæ¶æ„
- ç™¾å¹´æ¢ç´¢è·¯çº¿å›¾
- å›½é™…åè°ƒæ²»ç†æ¡†æ¶
- å¯æŒç»­å‘å±•ä¿éšœä½“ç³»
"""
        
        try:
            response = self.call_model(prompt)
            
            return {
                "test_name": "space_exploration_program",
                "prompt": prompt,
                "response": response,
                "timestamp": time.time(),
                "success": True
            }
            
        except Exception as e:
            return {
                "test_name": "space_exploration_program",
                "error": str(e),
                "success": False
            }
    
    def run_comprehensive_test(self) -> Dict[str, Any]:
        """è¿è¡Œç»¼åˆå¤šå­¦ç§‘åˆ†è§£æµ‹è¯•"""
        print("ğŸš€ å¼€å§‹å¤æ‚ç»¼åˆå¤šå­¦ç§‘ä»»åŠ¡åˆ†è§£èƒ½åŠ›æµ‹è¯•")
        
        results = {}
        
        # æµ‹è¯•1: æ™ºæ…§åŸå¸‚è½¬å‹
        print("\n=== æµ‹è¯•1: æ™ºæ…§åŸå¸‚è½¬å‹å¤šå­¦ç§‘åˆ†è§£ ===")
        results["smart_city"] = self.test_smart_city_transformation()
        
        # æµ‹è¯•2: æ°”å€™å˜åŒ–åº”å¯¹
        print("\n=== æµ‹è¯•2: æ°”å€™å˜åŒ–åº”å¯¹å¤šå­¦ç§‘æ–¹æ¡ˆ ===")
        results["climate_change"] = self.test_climate_change_response()
        
        # æµ‹è¯•3: å¤ªç©ºæ¢ç´¢è®¡åˆ’
        print("\n=== æµ‹è¯•3: å¤ªç©ºæ¢ç´¢è®¡åˆ’å¤šå­¦ç§‘è®¾è®¡ ===")
        results["space_exploration"] = self.test_space_exploration_program()
        
        return {
            "test_suite": "multidisciplinary_decomposition",
            "model": self.model_name,
            "timestamp": time.time(),
            "results": results
        }

def run_test(model=None):
    """è¿è¡Œæµ‹è¯•çš„ä¸»å‡½æ•°"""
    test_model = model if model else MODEL_TO_TEST
    test = MultidisciplinaryDecompositionTest(test_model)
    
    # è¿è¡Œç»¼åˆæµ‹è¯•
    results = test.run_comprehensive_test()
    
    # ä¿å­˜ç»“æœ
    output_path = os.path.join(test.model_dir, "multidisciplinary_decomposition_test.json")
    with open(output_path, 'w', encoding='utf-8') as f:
        json.dump(results, f, ensure_ascii=False, indent=2)
    
    print(f"\nğŸ“Š æµ‹è¯•å®Œæˆï¼ç»“æœå·²ä¿å­˜åˆ°: {output_path}")
    
    return results

if __name__ == "__main__":
    run_test()
