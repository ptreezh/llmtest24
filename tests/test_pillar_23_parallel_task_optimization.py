#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Pillar 23: å¤åˆä»»åŠ¡åˆ†è§£ä¸ºå¹¶è¡Œä»»åŠ¡çš„èƒ½åŠ›æµ‹è¯•
æµ‹è¯•æ¨¡å‹åœ¨å¤æ‚ä»»åŠ¡å¹¶è¡ŒåŒ–åˆ†è§£ã€èµ„æºä¼˜åŒ–åˆ†é…å’Œå¹¶è¡Œæ‰§è¡Œç®¡ç†æ–¹é¢çš„èƒ½åŠ›
"""

import ollama
import sys
import os
import json
import time
import re
from typing import Dict, List, Any
from utils import call_qiniu_deepseek, run_single_test

sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))
try:
    from config import MODEL_TO_TEST
except ImportError:
    print("é”™è¯¯: æ— æ³•ä»config.pyå¯¼å…¥MODEL_TO_TESTã€‚è¯·ç¡®ä¿config.pyå­˜åœ¨äºé¡¹ç›®æ ¹ç›®å½•ã€‚")
    sys.exit(1)

class ParallelTaskOptimizationTest:
    def __init__(self, model_name: str):
        self.model_name = model_name
        self.model_dir = os.path.join(os.path.dirname(__file__), '..', 'testout', self.model_name.replace(':', '_').replace('/', '_'))
        os.makedirs(self.model_dir, exist_ok=True)

    def call_model(self, prompt, options=None):
        return run_single_test("Pillar 23: Parallel Task Optimization", prompt, self.model_name, options or {}, messages=[], test_script_name="test_pillar_23_parallel_task_optimization.py")[0]
    
    def test_data_center_migration(self) -> Dict[str, Any]:
        """æµ‹è¯•æ•°æ®ä¸­å¿ƒè¿ç§»é¡¹ç›®çš„å¹¶è¡Œä»»åŠ¡åˆ†è§£"""
        prompt = """
ä½ æ˜¯ä¸€ä½èµ„æ·±çš„ITé¡¹ç›®ç»ç†ï¼Œè´Ÿè´£ä¸€ä¸ªå¤§å‹ä¼ä¸šæ•°æ®ä¸­å¿ƒè¿ç§»é¡¹ç›®ã€‚

é¡¹ç›®èƒŒæ™¯ï¼š
- è¿ç§»è§„æ¨¡ï¼š500å°æœåŠ¡å™¨ï¼Œ200TBæ•°æ®ï¼Œ50ä¸ªä¸šåŠ¡ç³»ç»Ÿ
- æ—¶é—´çª—å£ï¼šå¿…é¡»åœ¨3ä¸ªæœˆå†…å®Œæˆï¼Œæœ€å°åŒ–ä¸šåŠ¡ä¸­æ–­
- å›¢é˜Ÿèµ„æºï¼šç½‘ç»œå·¥ç¨‹å¸ˆ8äººï¼Œç³»ç»Ÿå·¥ç¨‹å¸ˆ12äººï¼Œæ•°æ®åº“ä¸“å®¶6äººï¼Œå®‰å…¨ä¸“å®¶4äººï¼Œé¡¹ç›®åè°ƒå‘˜2äºº
- ç¡¬ä»¶èµ„æºï¼šè¿ç§»å·¥å…·10å¥—ï¼Œç½‘ç»œå¸¦å®½é™åˆ¶ï¼Œä¸´æ—¶å­˜å‚¨è®¾å¤‡æœ‰é™

å¤æ‚çº¦æŸæ¡ä»¶ï¼š
1. **ä¸šåŠ¡è¿ç»­æ€§**ï¼šæ ¸å¿ƒä¸šåŠ¡ç³»ç»Ÿåœæœºæ—¶é—´ä¸èƒ½è¶…è¿‡4å°æ—¶
2. **ä¾èµ–å…³ç³»**ï¼šæ•°æ®åº“ç³»ç»Ÿå¿…é¡»å…ˆäºåº”ç”¨ç³»ç»Ÿè¿ç§»
3. **èµ„æºå†²çª**ï¼šç½‘ç»œå¸¦å®½åœ¨é«˜å³°æœŸå—é™ï¼Œä¸“å®¶äººå‘˜ä¸èƒ½åŒæ—¶å¤„ç†å¤šä¸ªå…³é”®ç³»ç»Ÿ
4. **å®‰å…¨è¦æ±‚**ï¼šæ•æ„Ÿæ•°æ®è¿ç§»éœ€è¦å®‰å…¨ä¸“å®¶å…¨ç¨‹ç›‘ç£
5. **æµ‹è¯•éªŒè¯**ï¼šæ¯ä¸ªç³»ç»Ÿè¿ç§»åéœ€è¦å®Œæ•´åŠŸèƒ½æµ‹è¯•

ç³»ç»Ÿåˆ†ç±»å’Œç‰¹å¾ï¼š
- **æ ¸å¿ƒä¸šåŠ¡ç³»ç»Ÿ** (10ä¸ª)ï¼šERPã€CRMã€è´¢åŠ¡ç³»ç»Ÿç­‰ï¼Œåœæœºæ—¶é—´è¦æ±‚æä¸¥æ ¼
- **æ”¯æ’‘ç³»ç»Ÿ** (15ä¸ª)ï¼šé‚®ä»¶ã€OAã€ç›‘æ§ç³»ç»Ÿç­‰ï¼Œå¯ä»¥å®¹å¿è¾ƒé•¿åœæœºæ—¶é—´
- **æ•°æ®ä»“åº“ç³»ç»Ÿ** (8ä¸ª)ï¼šå¤§æ•°æ®å¹³å°ã€BIç³»ç»Ÿç­‰ï¼Œæ•°æ®é‡å¤§ä½†å®æ—¶æ€§è¦æ±‚ä¸é«˜
- **å¼€å‘æµ‹è¯•ç³»ç»Ÿ** (12ä¸ª)ï¼šå¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒç­‰ï¼Œå¯ä»¥çµæ´»å®‰æ’æ—¶é—´
- **å¤–å›´ç³»ç»Ÿ** (5ä¸ª)ï¼šæ‰“å°æœåŠ¡ã€æ–‡ä»¶æœåŠ¡ç­‰ï¼Œå½±å“èŒƒå›´å°

è¯·è®¾è®¡æœ€ä¼˜çš„å¹¶è¡Œä»»åŠ¡åˆ†è§£å’Œæ‰§è¡Œæ–¹æ¡ˆï¼š

1. **å¹¶è¡Œä»»åŠ¡è¯†åˆ«**ï¼š
   - åˆ†æ50ä¸ªç³»ç»Ÿé—´çš„ä¾èµ–å…³ç³»
   - è¯†åˆ«å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ä»»åŠ¡ç»„
   - è®¾è®¡å¤šå±‚çº§çš„å¹¶è¡Œæ‰§è¡Œç­–ç•¥

2. **èµ„æºä¼˜åŒ–åˆ†é…**ï¼š
   - äººå‘˜æŠ€èƒ½ä¸ä»»åŠ¡çš„æœ€ä¼˜åŒ¹é…
   - ç¡¬ä»¶èµ„æºçš„åŠ¨æ€åˆ†é…ç­–ç•¥
   - ç½‘ç»œå¸¦å®½çš„æ—¶é—´æ®µä¼˜åŒ–ä½¿ç”¨

3. **æ—¶é—´çª—å£ä¼˜åŒ–**ï¼š
   - åˆ©ç”¨ä¸šåŠ¡ä½å³°æœŸçš„å¹¶è¡Œè¿ç§»è®¡åˆ’
   - å‘¨æœ«å’Œå¤œé—´çš„é›†ä¸­è¿ç§»å®‰æ’
   - åˆ†é˜¶æ®µå¹¶è¡Œæ‰§è¡Œçš„æ—¶é—´çº¿è®¾è®¡

4. **é£é™©å¹¶è¡Œç®¡æ§**ï¼š
   - å¹¶è¡Œä»»åŠ¡é—´çš„é£é™©éš”ç¦»æœºåˆ¶
   - å¤±è´¥ä»»åŠ¡çš„å¿«é€Ÿæ¢å¤å’Œé‡æ–°è°ƒåº¦
   - å…³é”®è·¯å¾„çš„å¤‡ä»½å¹¶è¡Œæ–¹æ¡ˆ

5. **è´¨é‡å¹¶è¡Œä¿è¯**ï¼š
   - å¹¶è¡Œæµ‹è¯•å’ŒéªŒè¯æµç¨‹
   - å¤šç³»ç»ŸåŒæ—¶ä¸Šçº¿çš„åè°ƒæœºåˆ¶
   - å¹¶è¡Œç›‘æ§å’Œé—®é¢˜å¿«é€Ÿå®šä½

è¦æ±‚è¾“å‡ºï¼š
- å¹¶è¡Œä»»åŠ¡åˆ†è§£å›¾ï¼ˆæ˜¾ç¤ºå¯å¹¶è¡Œæ‰§è¡Œçš„ä»»åŠ¡ç»„ï¼‰
- èµ„æºåˆ†é…ç”˜ç‰¹å›¾ï¼ˆæ—¶é—´+äººå‘˜+è®¾å¤‡ï¼‰
- å…³é”®è·¯å¾„åˆ†æï¼ˆè¯†åˆ«å½±å“æ€»å·¥æœŸçš„å…³é”®ä»»åŠ¡é“¾ï¼‰
- å¹¶è¡Œé£é™©æ§åˆ¶çŸ©é˜µ
"""
        
        try:
            response = self.call_model(prompt)
            
            return {
                "test_name": "data_center_migration",
                "prompt": prompt,
                "response": response,
                "timestamp": time.time(),
                "success": True
            }
            
        except Exception as e:
            return {
                "test_name": "data_center_migration",
                "error": str(e),
                "success": False
            }
    
    def test_software_platform_development(self) -> Dict[str, Any]:
        """æµ‹è¯•å¤§å‹è½¯ä»¶å¹³å°å¼€å‘çš„å¹¶è¡Œä»»åŠ¡ä¼˜åŒ–"""
        prompt = """
ä½ æ˜¯ä¸€ä¸ªå¤§å‹ç”µå•†å¹³å°é‡æ„é¡¹ç›®çš„æŠ€æœ¯æ€»ç›‘ï¼Œéœ€è¦å°†ç°æœ‰å•ä½“æ¶æ„æ‹†åˆ†ä¸ºå¾®æœåŠ¡æ¶æ„ã€‚

é¡¹ç›®è§„æ¨¡ï¼š
- ç°æœ‰ç³»ç»Ÿï¼š100ä¸‡è¡Œä»£ç ï¼Œæ—¥æ´»ç”¨æˆ·500ä¸‡ï¼Œå¹´äº¤æ˜“é¢1000äº¿
- ç›®æ ‡æ¶æ„ï¼š30ä¸ªå¾®æœåŠ¡ï¼Œæ”¯æŒ10å€ä¸šåŠ¡å¢é•¿
- å¼€å‘å›¢é˜Ÿï¼šå‰ç«¯å·¥ç¨‹å¸ˆ15äººï¼Œåç«¯å·¥ç¨‹å¸ˆ25äººï¼Œæµ‹è¯•å·¥ç¨‹å¸ˆ10äººï¼Œè¿ç»´å·¥ç¨‹å¸ˆ8äººï¼Œæ¶æ„å¸ˆ3äºº
- æ—¶é—´è¦æ±‚ï¼š6ä¸ªæœˆå†…å®Œæˆé‡æ„ï¼ŒæœŸé—´ä¸šåŠ¡ä¸èƒ½ä¸­æ–­

å¾®æœåŠ¡æ¨¡å—åˆ’åˆ†ï¼š
1. **ç”¨æˆ·æœåŠ¡ç¾¤** (5ä¸ªæœåŠ¡)ï¼šç”¨æˆ·ç®¡ç†ã€è®¤è¯æˆæƒã€ä¸ªäººä¸­å¿ƒã€æ¶ˆæ¯é€šçŸ¥ã€ç¤¾äº¤åŠŸèƒ½
2. **å•†å“æœåŠ¡ç¾¤** (8ä¸ªæœåŠ¡)ï¼šå•†å“ç›®å½•ã€åº“å­˜ç®¡ç†ã€ä»·æ ¼å¼•æ“ã€æ¨èç³»ç»Ÿã€æœç´¢æœåŠ¡ã€è¯„ä»·ç³»ç»Ÿã€ä¿ƒé”€å¼•æ“ã€ç±»ç›®ç®¡ç†
3. **äº¤æ˜“æœåŠ¡ç¾¤** (6ä¸ªæœåŠ¡)ï¼šè´­ç‰©è½¦ã€è®¢å•ç®¡ç†ã€æ”¯ä»˜æœåŠ¡ã€ä¼˜æƒ åˆ¸ã€ç§¯åˆ†ç³»ç»Ÿã€å‘ç¥¨æœåŠ¡
4. **ç‰©æµæœåŠ¡ç¾¤** (4ä¸ªæœåŠ¡)ï¼šé…é€ç®¡ç†ã€ä»“å‚¨ç³»ç»Ÿã€ç‰©æµè·Ÿè¸ªã€é€€æ¢è´§
5. **æ•°æ®æœåŠ¡ç¾¤** (4ä¸ªæœåŠ¡)ï¼šæ•°æ®é‡‡é›†ã€å®æ—¶åˆ†æã€æŠ¥è¡¨ç³»ç»Ÿã€æ•°æ®åŒæ­¥
6. **åŸºç¡€æœåŠ¡ç¾¤** (3ä¸ªæœåŠ¡)ï¼šé…ç½®ä¸­å¿ƒã€æœåŠ¡ç½‘å…³ã€ç›‘æ§å‘Šè­¦

æŠ€æœ¯çº¦æŸï¼š
- æ•°æ®åº“æ‹†åˆ†ï¼šéœ€è¦ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œé¿å…åˆ†å¸ƒå¼äº‹åŠ¡
- æ¥å£å…¼å®¹ï¼šæ–°æœåŠ¡å¿…é¡»å…¼å®¹ç°æœ‰å‰ç«¯å’Œç¬¬ä¸‰æ–¹ç³»ç»Ÿ
- æ€§èƒ½è¦æ±‚ï¼šå“åº”æ—¶é—´ä¸èƒ½è¶…è¿‡ç°æœ‰ç³»ç»Ÿçš„1.2å€
- å¯ç”¨æ€§ï¼šå•ä¸ªæœåŠ¡æ•…éšœä¸èƒ½å½±å“æ•´ä½“ç³»ç»Ÿ
- å®‰å…¨æ€§ï¼šæ•æ„Ÿæ•°æ®å¤„ç†éœ€è¦ç‰¹æ®ŠåŠ å¯†å’Œå®¡è®¡

å¼€å‘èµ„æºé™åˆ¶ï¼š
- æ¶æ„å¸ˆæ—¶é—´æœ‰é™ï¼Œä¸èƒ½åŒæ—¶è®¾è®¡æ‰€æœ‰æœåŠ¡
- æ•°æ®åº“ä¸“å®¶åªæœ‰2äººï¼Œæ•°æ®æ‹†åˆ†éœ€è¦æ’é˜Ÿ
- æµ‹è¯•ç¯å¢ƒæœ‰é™ï¼Œä¸èƒ½åŒæ—¶æµ‹è¯•æ‰€æœ‰æœåŠ¡
- ç”Ÿäº§å‘å¸ƒçª—å£æœ‰é™ï¼Œæ¯å‘¨åªèƒ½å‘å¸ƒ2-3ä¸ªæœåŠ¡

è¯·è®¾è®¡æœ€ä¼˜çš„å¹¶è¡Œå¼€å‘å’Œéƒ¨ç½²ç­–ç•¥ï¼š

1. **æœåŠ¡å¼€å‘å¹¶è¡ŒåŒ–**ï¼š
   - åˆ†æ30ä¸ªå¾®æœåŠ¡é—´çš„ä¾èµ–å…³ç³»
   - è®¾è®¡å¯å¹¶è¡Œå¼€å‘çš„æœåŠ¡ç»„åˆ
   - åˆ¶å®šåˆ†æ‰¹æ¬¡å¹¶è¡Œå¼€å‘è®¡åˆ’

2. **å›¢é˜Ÿå¹¶è¡Œåä½œ**ï¼š
   - å¤šå›¢é˜Ÿå¹¶è¡Œå¼€å‘çš„åè°ƒæœºåˆ¶
   - å…±äº«ç»„ä»¶å’Œå…¬å…±æœåŠ¡çš„å¼€å‘ç­–ç•¥
   - è·¨å›¢é˜Ÿä»£ç é›†æˆå’Œå†²çªè§£å†³

3. **æ•°æ®è¿ç§»å¹¶è¡ŒåŒ–**ï¼š
   - æ•°æ®åº“æ‹†åˆ†çš„å¹¶è¡Œæ‰§è¡Œæ–¹æ¡ˆ
   - æ•°æ®ä¸€è‡´æ€§ä¿è¯çš„å¹¶è¡ŒéªŒè¯
   - æ–°æ—§ç³»ç»Ÿå¹¶è¡Œè¿è¡Œçš„æ•°æ®åŒæ­¥

4. **æµ‹è¯•å¹¶è¡Œä¼˜åŒ–**ï¼š
   - å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç³»ç»Ÿæµ‹è¯•çš„å¹¶è¡Œç­–ç•¥
   - å¤šç¯å¢ƒå¹¶è¡Œæµ‹è¯•çš„èµ„æºè°ƒåº¦
   - è‡ªåŠ¨åŒ–æµ‹è¯•çš„å¹¶è¡Œæ‰§è¡Œè®¾è®¡

5. **éƒ¨ç½²å¹¶è¡Œç­–ç•¥**ï¼š
   - ç°åº¦å‘å¸ƒçš„å¹¶è¡Œæ¨è¿›æ–¹æ¡ˆ
   - æœåŠ¡é—´ä¾èµ–çš„éƒ¨ç½²é¡ºåºä¼˜åŒ–
   - å›æ»šæœºåˆ¶çš„å¹¶è¡Œå‡†å¤‡

è¦æ±‚è¾“å‡ºï¼š
- å¾®æœåŠ¡ä¾èµ–å…³ç³»å›¾
- å¹¶è¡Œå¼€å‘æ—¶é—´çº¿ï¼ˆæ˜¾ç¤ºå¯åŒæ—¶è¿›è¡Œçš„å¼€å‘ä»»åŠ¡ï¼‰
- å›¢é˜Ÿèµ„æºåˆ†é…çŸ©é˜µ
- å¹¶è¡Œéƒ¨ç½²ç­–ç•¥å›¾
"""
        
        try:
            response = self.call_model(prompt)
            
            return {
                "test_name": "software_platform_development",
                "prompt": prompt,
                "response": response,
                "timestamp": time.time(),
                "success": True
            }
            
        except Exception as e:
            return {
                "test_name": "software_platform_development",
                "error": str(e),
                "success": False
            }
    
    def test_manufacturing_production_optimization(self) -> Dict[str, Any]:
        """æµ‹è¯•åˆ¶é€ ä¸šç”Ÿäº§çº¿ä¼˜åŒ–çš„å¹¶è¡Œä»»åŠ¡åˆ†è§£"""
        prompt = """
ä½ æ˜¯ä¸€å®¶æ±½è½¦åˆ¶é€ ä¼ä¸šçš„ç”Ÿäº§æ€»ç›‘ï¼Œè´Ÿè´£æ–°è½¦å‹ç”Ÿäº§çº¿çš„å»ºè®¾å’Œä¼˜åŒ–é¡¹ç›®ã€‚

é¡¹ç›®èƒŒæ™¯ï¼š
- æ–°è½¦å‹ï¼šç”µåŠ¨SUVï¼Œå¹´äº§èƒ½ç›®æ ‡20ä¸‡å°
- ç”Ÿäº§çº¿ï¼šæ€»è£…çº¿ã€ç„Šè£…çº¿ã€æ¶‚è£…çº¿ã€å†²å‹çº¿å„1æ¡ï¼Œé›¶éƒ¨ä»¶ç”Ÿäº§çº¿15æ¡
- å·¥æœŸè¦æ±‚ï¼š8ä¸ªæœˆå†…å®Œæˆæ‰€æœ‰ç”Ÿäº§çº¿å»ºè®¾å’Œè°ƒè¯•
- æŠ•èµ„é¢„ç®—ï¼š15äº¿äººæ°‘å¸

ç”Ÿäº§çº¿å»ºè®¾ä»»åŠ¡ï¼š
1. **å†²å‹è½¦é—´** (2ä¸ªæœˆ)ï¼š4å°å¤§å‹å†²å‹æœºï¼Œè‡ªåŠ¨åŒ–ä¼ è¾“ç³»ç»Ÿï¼Œè´¨æ£€è®¾å¤‡
2. **ç„Šè£…è½¦é—´** (3ä¸ªæœˆ)ï¼š200å°ç„Šæ¥æœºå™¨äººï¼Œå¤¹å…·å·¥è£…ï¼Œè¾“é€çº¿
3. **æ¶‚è£…è½¦é—´** (4ä¸ªæœˆ)ï¼šå‰å¤„ç†çº¿ã€ç”µæ³³çº¿ã€å–·æ¶‚çº¿ã€çƒ˜å¹²è®¾å¤‡
4. **æ€»è£…è½¦é—´** (2.5ä¸ªæœˆ)ï¼šè£…é…çº¿ã€æµ‹è¯•è®¾å¤‡ã€åŒ…è£…çº¿
5. **é›¶éƒ¨ä»¶è½¦é—´** (å„1-2ä¸ªæœˆ)ï¼šå‘åŠ¨æœºã€ç”µæ± ã€åº§æ¤…ã€ä»ªè¡¨ç­‰15æ¡çº¿
6. **ç‰©æµç³»ç»Ÿ** (3ä¸ªæœˆ)ï¼šè‡ªåŠ¨åŒ–ç«‹ä½“ä»“åº“ã€AGVç³»ç»Ÿã€é…é€ä¸­å¿ƒ
7. **è´¨æ£€ä¸­å¿ƒ** (2ä¸ªæœˆ)ï¼šæ£€æµ‹è®¾å¤‡ã€å®éªŒå®¤ã€æ ‡å®šè®¾å¤‡
8. **å…¬ç”¨è®¾æ–½** (6ä¸ªæœˆ)ï¼šä¾›ç”µã€ä¾›æ°”ã€ä¾›æ°´ã€åºŸæ°´å¤„ç†ã€æ¶ˆé˜²

èµ„æºçº¦æŸï¼š
- è®¾å¤‡ä¾›åº”å•†ï¼šå†²å‹è®¾å¤‡2å®¶ï¼Œç„Šæ¥è®¾å¤‡3å®¶ï¼Œæ¶‚è£…è®¾å¤‡1å®¶ï¼Œæ€»è£…è®¾å¤‡4å®¶
- å®‰è£…å›¢é˜Ÿï¼šæœºæ¢°å®‰è£…é˜Ÿ5æ”¯ï¼Œç”µæ°”å®‰è£…é˜Ÿ3æ”¯ï¼Œè°ƒè¯•å·¥ç¨‹å¸ˆ20äºº
- å‚æˆ¿å»ºè®¾ï¼šåœŸå»ºé˜Ÿ2æ”¯ï¼Œé’¢ç»“æ„é˜Ÿ1æ”¯ï¼Œè£…ä¿®é˜Ÿ3æ”¯
- èµ„é‡‘æµï¼šè®¾å¤‡é‡‡è´­éœ€è¦åˆ†æ‰¹ä»˜æ¬¾ï¼Œç°é‡‘æµæœ‰æ—¶é—´çº¦æŸ

å¤æ‚ä¾èµ–å…³ç³»ï¼š
- å‚æˆ¿å»ºè®¾å¿…é¡»å…ˆäºè®¾å¤‡å®‰è£…
- å…¬ç”¨è®¾æ–½å¿…é¡»ä¸å„è½¦é—´å»ºè®¾åŒæ­¥
- è®¾å¤‡è°ƒè¯•éœ€è¦æŒ‰ç…§å·¥è‰ºæµç¨‹é¡ºåºè¿›è¡Œ
- äººå‘˜åŸ¹è®­éœ€è¦åœ¨è®¾å¤‡è°ƒè¯•å®Œæˆåè¿›è¡Œ
- è¯•ç”Ÿäº§éœ€è¦æ‰€æœ‰ç³»ç»Ÿè”è°ƒå®Œæˆ

å¹¶è¡Œä¼˜åŒ–ç›®æ ‡ï¼š
- æœ€çŸ­åŒ–æ€»å·¥æœŸï¼ˆç›®æ ‡6ä¸ªæœˆå†…å®Œæˆï¼‰
- æœ€ä¼˜åŒ–èµ„æºåˆ©ç”¨ç‡ï¼ˆäººå‘˜ã€è®¾å¤‡ã€èµ„é‡‘ï¼‰
- æœ€å°åŒ–é£é™©ï¼ˆè´¨é‡ã€å®‰å…¨ã€è¿›åº¦ï¼‰
- æœ€å¤§åŒ–å¹¶è¡Œåº¦ï¼ˆå‡å°‘ä¸²è¡Œç­‰å¾…æ—¶é—´ï¼‰

è¯·è®¾è®¡æœ€ä¼˜çš„å¹¶è¡Œå»ºè®¾å’Œè°ƒè¯•æ–¹æ¡ˆï¼š

1. **å¹¶è¡Œå»ºè®¾ç­–ç•¥**ï¼š
   - å‚æˆ¿å»ºè®¾ä¸è®¾å¤‡é‡‡è´­çš„å¹¶è¡Œå®‰æ’
   - å¤šè½¦é—´åŒæ—¶å»ºè®¾çš„èµ„æºåè°ƒ
   - å…¬ç”¨è®¾æ–½ä¸ç”Ÿäº§è®¾æ–½çš„å¹¶è¡Œæ–½å·¥

2. **è®¾å¤‡å®‰è£…å¹¶è¡ŒåŒ–**ï¼š
   - å¤šæ¡ç”Ÿäº§çº¿è®¾å¤‡çš„å¹¶è¡Œå®‰è£…è®¡åˆ’
   - å®‰è£…å›¢é˜Ÿçš„åŠ¨æ€è°ƒé…ç­–ç•¥
   - è®¾å¤‡åˆ°è´§ä¸å®‰è£…çš„æ—¶é—´åè°ƒ

3. **è°ƒè¯•å¹¶è¡Œä¼˜åŒ–**ï¼š
   - å•æœºè°ƒè¯•ä¸è”æœºè°ƒè¯•çš„å¹¶è¡Œå®‰æ’
   - å¤šç³»ç»Ÿå¹¶è¡Œè°ƒè¯•çš„åè°ƒæœºåˆ¶
   - è°ƒè¯•é—®é¢˜çš„å¹¶è¡Œè§£å†³æµç¨‹

4. **äººå‘˜åŸ¹è®­å¹¶è¡ŒåŒ–**ï¼š
   - å¤šå²—ä½äººå‘˜çš„å¹¶è¡ŒåŸ¹è®­è®¡åˆ’
   - ç†è®ºåŸ¹è®­ä¸å®æ“åŸ¹è®­çš„å¹¶è¡Œå®‰æ’
   - å†…éƒ¨åŸ¹è®­ä¸å¤–éƒ¨åŸ¹è®­çš„åè°ƒ

5. **è¯•ç”Ÿäº§å¹¶è¡ŒéªŒè¯**ï¼š
   - åˆ†ç³»ç»Ÿè¯•ç”Ÿäº§çš„å¹¶è¡Œæ‰§è¡Œ
   - è´¨é‡éªŒè¯çš„å¹¶è¡Œæµ‹è¯•æ–¹æ¡ˆ
   - äº§èƒ½çˆ¬å¡çš„å¹¶è¡Œä¼˜åŒ–ç­–ç•¥

è¦æ±‚è¾“å‡ºï¼š
- å¹¶è¡Œå»ºè®¾ç”˜ç‰¹å›¾ï¼ˆæ˜¾ç¤ºå¯åŒæ—¶è¿›è¡Œçš„å»ºè®¾ä»»åŠ¡ï¼‰
- èµ„æºå†²çªåˆ†æå’Œè§£å†³æ–¹æ¡ˆ
- å…³é”®è·¯å¾„ä¼˜åŒ–å»ºè®®
- å¹¶è¡Œé£é™©æ§åˆ¶æªæ–½
"""
        
        try:
            response = self.call_model(prompt)
            
            return {
                "test_name": "manufacturing_production_optimization",
                "prompt": prompt,
                "response": response,
                "timestamp": time.time(),
                "success": True
            }
            
        except Exception as e:
            return {
                "test_name": "manufacturing_production_optimization",
                "error": str(e),
                "success": False
            }
    
    def run_comprehensive_test(self) -> Dict[str, Any]:
        """è¿è¡Œç»¼åˆå¹¶è¡Œä»»åŠ¡ä¼˜åŒ–æµ‹è¯•"""
        print("ğŸš€ å¼€å§‹å¤åˆä»»åŠ¡åˆ†è§£ä¸ºå¹¶è¡Œä»»åŠ¡çš„èƒ½åŠ›æµ‹è¯•")
        
        results = {}
        
        # æµ‹è¯•1: æ•°æ®ä¸­å¿ƒè¿ç§»
        print("\n=== æµ‹è¯•1: æ•°æ®ä¸­å¿ƒè¿ç§»å¹¶è¡Œä»»åŠ¡åˆ†è§£ ===")
        results["data_center_migration"] = self.test_data_center_migration()
        
        # æµ‹è¯•2: è½¯ä»¶å¹³å°å¼€å‘
        print("\n=== æµ‹è¯•2: è½¯ä»¶å¹³å°å¼€å‘å¹¶è¡Œä¼˜åŒ– ===")
        results["software_development"] = self.test_software_platform_development()
        
        # æµ‹è¯•3: åˆ¶é€ ä¸šç”Ÿäº§ä¼˜åŒ–
        print("\n=== æµ‹è¯•3: åˆ¶é€ ä¸šç”Ÿäº§çº¿å¹¶è¡Œå»ºè®¾ ===")
        results["manufacturing_optimization"] = self.test_manufacturing_production_optimization()
        
        return {
            "test_suite": "parallel_task_optimization",
            "model": self.model_name,
            "timestamp": time.time(),
            "results": results
        }

def run_test(model=None):
    """è¿è¡Œæµ‹è¯•çš„ä¸»å‡½æ•°"""
    test_model = model if model else MODEL_TO_TEST
    test = ParallelTaskOptimizationTest(test_model)
    
    # è¿è¡Œç»¼åˆæµ‹è¯•
    results = test.run_comprehensive_test()
    
    # ä¿å­˜ç»“æœ
    output_path = os.path.join(test.model_dir, "parallel_task_optimization_test.json")
    with open(output_path, 'w', encoding='utf-8') as f:
        json.dump(results, f, ensure_ascii=False, indent=2)
    
    print(f"\nğŸ“Š æµ‹è¯•å®Œæˆï¼ç»“æœå·²ä¿å­˜åˆ°: {output_path}")
    
    return results

if __name__ == "__main__":
    run_test()
