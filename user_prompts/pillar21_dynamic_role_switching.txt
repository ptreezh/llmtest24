# case1: 基础角色切换测试
测试模型在三个不同角色间轮流切换的能力：侦探、医生、老师。

**测试流程：**
1. 切换到侦探角色，处理失踪案件咨询
2. 切换到医生角色，处理健康问题咨询  
3. 切换到老师角色，处理教学问题
4. 再次切换回侦探，继续案件调查
5. 再次切换到医生，深入健康咨询
6. 再次切换到老师，深化教学内容

**角色设定：**
- **侦探李明**: 经验丰富，善于观察，说话简洁有力，总是用"根据我的观察..."开始分析
- **王医生**: 温和耐心，专业严谨，总是用"从医学角度来看..."开始解释
- **张老师**: 热爱教育，善于启发，总是用"让我们一起来想想..."开始引导

**评估要点：**
- 角色切换的准确性和及时性
- 每个角色的个性特征是否鲜明
- 说话风格和专业术语的一致性
- 角色间的明确区分度

**期望表现：**
模型应该能够根据角色提示词快速切换身份，并在每次切换后立即展现出对应角色的专业特征和说话风格。

# case2: 外部记忆文件管理测试
测试模型读取、理解和更新角色特定记忆文件的能力。

**记忆文件结构：**
每个角色都有独立的JSON记忆文件，包含：
- personality: 个性特征
- current_task: 当前任务状态
- key_information: 关键信息记录
- attention_focus: 当前注意力焦点
- conversation_history: 对话历史
- task_progress: 任务进度

**测试场景：**
1. **侦探记忆管理**：
   - 初始状态：调查张三失踪案，已知线索：最后出现在咖啡厅
   - 新信息：嫌疑人在公园丢了钥匙
   - 测试：切换到其他角色后再回来，是否记住钥匙线索

2. **医生记忆管理**：
   - 初始状态：为李四问诊，症状：头痛、失眠
   - 新信息：头痛与工作压力相关
   - 测试：是否能关联之前的症状记录

3. **老师记忆管理**：
   - 初始状态：讲解《小红帽》故事
   - 新信息：学生对大灰狼的象征意义有疑问
   - 测试：是否能结合之前的教学进度

**评估要点：**
- 记忆文件读取的准确性
- 新信息的正确整合和存储
- 跨会话的记忆持续性
- 记忆更新的逻辑性

# case3: 状态连续性保持测试
测试模型在角色切换过程中保持各角色状态连续性的能力。

**连续性维度：**
1. **个性连续性**：角色的基本性格特征不变
2. **任务连续性**：当前任务的进展状态保持
3. **对话连续性**：能够接续之前的对话内容
4. **注意力连续性**：关注焦点的一致性

**测试序列：**
```
侦探(收集线索) → 医生(问诊) → 老师(授课) → 侦探(分析线索) → 医生(诊断) → 老师(总结)
```

**具体测试内容：**
1. **第一轮侦探**：收集失踪案线索，记录关键信息
2. **医生插入**：处理完全不相关的医疗咨询
3. **老师插入**：处理教学问题
4. **第二轮侦探**：应该能够：
   - 记住第一轮收集的线索
   - 保持侦探的专业态度
   - 继续推进案件调查
   - 不受其他角色任务的干扰

**评估标准：**
- 角色回归时是否立即恢复正确状态
- 是否记住之前的任务进展
- 个性特征是否保持一致
- 注意力焦点是否正确恢复

# case4: 复杂上下文整合测试
测试模型整合外部提示词、记忆文件和当前对话的能力。

**信息源整合：**
1. **角色提示词**：基础角色设定和行为模式
2. **记忆文件**：历史状态和累积信息
3. **当前输入**：用户的即时需求
4. **对话历史**：本次会话的上下文

**复杂场景设计：**
**侦探角色复杂整合**：
- 提示词：专业侦探，善于推理
- 记忆文件：正在调查失踪案，已有多条线索
- 当前输入：发现新的矛盾证据
- 对话历史：之前讨论过嫌疑人动机

**要求模型：**
1. 保持侦探的专业身份
2. 回顾记忆中的已知线索
3. 分析新证据与旧线索的关系
4. 结合对话历史中的推理过程
5. 给出综合性的分析结论

**评估要点：**
- 信息整合的完整性
- 逻辑推理的连贯性
- 角色一致性的维护
- 优先级处理的合理性

# case5: 注意力焦点维护测试
测试模型在角色切换时维护各角色特定注意力焦点的能力。

**注意力焦点定义：**
- **侦探**：案件线索和推理逻辑
- **医生**：患者症状和诊断过程
- **老师**：学生理解和教学目标

**测试方法：**
在每次角色切换后，询问"你现在最关心什么？"或"你的重点是什么？"

**期望回答模式：**
- **侦探**："我现在最关心的是找到失踪者的下落，特别是那把在公园发现的钥匙可能提供的线索。"
- **医生**："我现在的重点是了解患者头痛的具体原因，特别是与工作压力的关联性。"
- **老师**："我们现在应该关注学生对故事寓意的理解，特别是大灰狼这个角色的象征意义。"

**干扰测试：**
在角色间插入无关话题，测试是否会影响注意力焦点：
1. 侦探专注案件时，插入天气话题
2. 医生专注诊断时，插入新闻话题
3. 老师专注教学时，插入娱乐话题

**评估标准：**
- 注意力焦点的准确性
- 抗干扰能力
- 焦点恢复的速度
- 专业领域的专注度

# case6: 跨会话状态持续性测试
测试模型在模拟的"跨会话"场景中保持角色状态的能力。

**模拟场景：**
假设这是一个多天的连续工作场景：
- 第一天：侦探开始调查，医生接诊新患者，老师开始新课程
- 第二天：各角色继续昨天的工作
- 第三天：处理新的发展和变化

**测试流程：**
1. **第一天模拟**：
   - 侦探：开始失踪案调查
   - 医生：初步问诊
   - 老师：课程导入

2. **"隔夜"处理**：
   - 保存所有角色的状态到记忆文件
   - 模拟时间流逝

3. **第二天模拟**：
   - 各角色应该能够：
     - 记住昨天的工作内容
     - 继续推进各自的任务
     - 保持角色的连续性

**评估要点：**
- 跨时间的记忆保持
- 任务进度的连续性
- 角色状态的稳定性
- 时间感知的合理性

**成功标准：**
模型应该能够在"第二天"开始时，自然地回顾"昨天"的工作，并基于之前的进展继续推进任务，就像真实的角色在连续工作一样。
